(this["webpackJsonpharmony-app"]=this["webpackJsonpharmony-app"]||[]).push([[0],{132:function(e,t,n){e.exports=n(171)},141:function(e,t,n){},142:function(e,t,n){},168:function(e,t,n){},171:function(e,t,n){"use strict";n.r(t);var a,r=n(0),l=n.n(r),i=n(12),c=n.n(i),o=n(8),u=(n(141),n(142),n(16)),s=n(119),d=n(236),m=n(223),E=n(122),g=n(237),p=(n(143),n(20)),v=n(41),f=n(9),b=n(7),h=n(203),y=n(205),O=n(206),S=n(58),L=n(100),G=n.n(L),j=n(101),C=n.n(j),T=n(102),_=n.n(T),k=n(174),I=Object(k.a)((function(e){return{leftMenuBtn:{marginRight:e.spacing(1)},title:{flexGrow:1}}}));!function(e){e[e.TOGGLE_THEME_DIALOG=0]="TOGGLE_THEME_DIALOG",e[e.TOGGLE_JOIN_GUILD_DIALOG=1]="TOGGLE_JOIN_GUILD_DIALOG",e[e.TOGGLE_GUILD_SETTINGS_DIALOG=2]="TOGGLE_GUILD_SETTINGS_DIALOG",e[e.TOGGLE_USER_SETTINGS_DIALOG=3]="TOGGLE_USER_SETTINGS_DIALOG",e[e.INVERT_THEME=4]="INVERT_THEME",e[e.CHANGE_PRIMARY=5]="CHANGE_PRIMARY",e[e.CHANGE_SECONDARY=6]="CHANGE_SECONDARY",e[e.SET_INPUT_STYLE=7]="SET_INPUT_STYLE",e[e.SET_CONNECTED=8]="SET_CONNECTED",e[e.SET_GUILDS=9]="SET_GUILDS",e[e.SET_SELECTED_GUILD=10]="SET_SELECTED_GUILD",e[e.SET_CHANNELS=11]="SET_CHANNELS",e[e.SET_SELECTED_CHANNEL=12]="SET_SELECTED_CHANNEL",e[e.SET_GUILD_PICTURE=13]="SET_GUILD_PICTURE",e[e.SET_GUILD_NAME=14]="SET_GUILD_NAME",e[e.SET_INVITES=15]="SET_INVITES",e[e.SET_USER=16]="SET_USER",e[e.SET_MESSAGES=17]="SET_MESSAGES",e[e.ADD_MESSAGE=18]="ADD_MESSAGE",e[e.FOCUS_CHAT_INPUT=19]="FOCUS_CHAT_INPUT"}(a||(a={}));var N=function(){var e=I(),t=Object(o.b)();return l.a.createElement(h.a,{position:"absolute"},l.a.createElement(y.a,null,l.a.createElement(O.a,{edge:"start",color:"inherit",className:e.leftMenuBtn},l.a.createElement(G.a,null)),l.a.createElement(S.a,{variant:"h6",className:e.title},"Harmony"),l.a.createElement(O.a,{edge:"end",color:"inherit",onClick:function(){return t({type:a.TOGGLE_THEME_DIALOG})}},l.a.createElement(C.a,null)),l.a.createElement(O.a,{edge:"end",color:"inherit",onClick:function(){return t({type:a.TOGGLE_USER_SETTINGS_DIALOG})}},l.a.createElement(_.a,null))))},D=n(242),A=n(212),w=n(213),R=n(214),U=n(215),x=n(244),M=n(216),H=n(241),P=n(238),F=n(221),W=n(222),J=n(74),B=n(73),Y=n(207),V=n(208),K=n(209),z=n(210),$=n(72),q=n(53),Q=n.n(q),X=function(e){return l.a.createElement("div",null,l.a.createElement(S.a,null,e.label),l.a.createElement("div",{style:{display:"flex"}},l.a.createElement(J.a,{style:{backgroundColor:B.a[500],width:"40px",height:"40px"},onClick:function(){return e.setColor(B.a)}},e.color===B.a?l.a.createElement(Q.a,null):void 0),l.a.createElement(J.a,{style:{backgroundColor:Y.a[500],width:"40px",height:"40px"},onClick:function(){return e.setColor(Y.a)}},e.color===Y.a?l.a.createElement(Q.a,null):void 0),l.a.createElement(J.a,{style:{backgroundColor:V.a[500],width:"40px",height:"40px"},onClick:function(){return e.setColor(V.a)}},e.color===V.a?l.a.createElement(Q.a,null):void 0),l.a.createElement(J.a,{style:{backgroundColor:K.a[500],width:"40px",height:"40px"},onClick:function(){return e.setColor(K.a)}},e.color===K.a?l.a.createElement(Q.a,null):void 0),l.a.createElement(J.a,{style:{backgroundColor:z.a[500],width:"40px",height:"40px"},onClick:function(){return e.setColor(z.a)}},e.color===z.a?l.a.createElement(Q.a,null):void 0),l.a.createElement(J.a,{style:{backgroundColor:$.a[500],width:"40px",height:"40px"},onClick:function(){return e.setColor($.a)}},e.color===$.a?l.a.createElement(Q.a,null):void 0)))},Z=function(){var e=Object(o.c)((function(e){return[e.themeDialog,e.theme.type,e.theme.inputStyle]})),t=Object(b.a)(e,3),n=t[0],i=t[1],c=t[2],u=Object(r.useState)(B.a),s=Object(b.a)(u,2),d=s[0],E=s[1],g=Object(r.useState)(Y.a),p=Object(b.a)(g,2),v=p[0],f=p[1],h=Object(o.b)();return Object(r.useEffect)((function(){h({type:a.CHANGE_PRIMARY,payload:d})}),[d,h]),Object(r.useEffect)((function(){h({type:a.CHANGE_SECONDARY,payload:v})}),[v,h]),l.a.createElement(D.a,{open:n,onClose:function(){return h({type:a.TOGGLE_THEME_DIALOG})}},l.a.createElement(A.a,null,"Customize Theme"),l.a.createElement(w.a,null,l.a.createElement(R.a,{component:"fieldset"},l.a.createElement(U.a,{component:"legend"},"Theme Type"),l.a.createElement(x.a,{value:i,row:!0,onChange:function(e){return h({type:a.INVERT_THEME})}},l.a.createElement(M.a,{value:"light",control:l.a.createElement(H.a,{color:"secondary"}),label:"Light",labelPlacement:"end"}),l.a.createElement(M.a,{value:"dark",control:l.a.createElement(H.a,{color:"secondary"}),label:"Dark",labelPlacement:"end"}))),l.a.createElement(X,{color:d,setColor:E,label:"Primary Color"}),l.a.createElement(X,{color:v,setColor:f,label:"Secondary Color"}),l.a.createElement(S.a,null,"Text Input Style"),l.a.createElement(P.a,{value:c||"standard",onChange:function(e){"string"===typeof e.target.value&&h({type:a.SET_INPUT_STYLE,payload:e.target.value})},variant:c,fullWidth:!0},l.a.createElement(F.a,{value:"standard"},"Standard"),l.a.createElement(F.a,{value:"filled"},"Filled"),l.a.createElement(F.a,{value:"outlined"},"Outlined"))),l.a.createElement(W.a,null,l.a.createElement(m.a,{color:"primary",onClick:function(){return h({type:a.TOGGLE_THEME_DIALOG})}},"Close")))},ee=Object(k.a)((function(e){return{root:{display:"flex",height:"100%",flexDirection:"column"},leftMenuBtn:{marginRight:e.spacing(1)},title:{flexGrow:1},navFill:Object(f.a)({},e.mixins.toolbar)}})),te=Object(k.a)((function(e){return{root:{flex:1,display:"flex",flexDirection:"row",flexGrow:1,width:"100%",overflow:"auto"},guildlist:{backgroundColor:"dark"===e.palette.type?e.palette.grey[900]:e.palette.grey[200],padding:e.spacing(1),borderRight:"1px solid grey"},channellist:{backgroundColor:"dark"===e.palette.type?e.palette.grey[900]:e.palette.grey[300],padding:0,width:"300px",overflowY:"auto"},guildiconroot:{borderRadius:"64px"},guildicon:{width:"64px",height:"64px"},chatArea:{display:"flex",flexDirection:"column",flexFlow:"column",width:"100%",height:"100%"},messages:{width:"100%",flex:"1 1 auto",overflow:"auto"},input:{width:"100%"}}})),ne=n(71),ae=n(220),re=n(173),le=n(224),ie=n(225),ce=n(226),oe=function(e){var t=new Date(0);return t.setUTCSeconds(e)," - ".concat(t.toDateString()," at ").concat(t.toLocaleTimeString())},ue=function(e){return l.a.createElement(re.a,{alignItems:"flex-start"},l.a.createElement(le.a,null,l.a.createElement(ie.a,{alt:e.userid,src:e.avatar?"http://localhost:2288/filestore/".concat(e.avatar):void 0})),l.a.createElement(ce.a,{primary:l.a.createElement(l.a.Fragment,null,e.username||e.userid,l.a.createElement(S.a,{component:"span",variant:"body1",color:"textSecondary"},oe(e.createdat))),secondary:e.message}))},se=function(){var e=Object(o.c)((function(e){return[e.messages,e.selectedChannel,e.users]})),t=Object(b.a)(e,3),n=t[0],a=t[1],i=t[2],c=Object(r.useRef)(void 0);return Object(r.useEffect)((function(){c.current&&(c.current.scrollTop=c.current.scrollHeight,c.current.scrollLeft=0)}),[n]),Object(r.useEffect)((function(){Object(ne.a)(new Set(n.map((function(e){return e.userid})))).forEach((function(e){i[e]||kt.sendGetUser(e)}))}),[n,i]),l.a.createElement(ae.a,{innerRef:c},n?n.map((function(e){return e.channel===a?l.a.createElement(ue,{key:e.messageid,guild:e.guild,userid:e.userid,username:i[e.userid]?i[e.userid].username:"",createdat:e.createdat,avatar:i[e.userid]?i[e.userid].avatar:void 0,message:e.message}):void 0})):void 0)},de=n(243),me=function(){var e=Object(o.c)((function(e){return[e.connected,e.theme.inputStyle,e.selectedGuild,e.selectedChannel,e.chatInputFocus]})),t=Object(b.a)(e,5),n=t[0],a=t[1],i=t[2],c=t[3],u=t[4],s=Object(r.useRef)();return Object(r.useEffect)((function(){s.current&&s.current.focus()}),[u]),l.a.createElement("div",null,l.a.createElement(de.a,{label:n?"Message":"Currently Offline",variant:a,fullWidth:!0,multiline:!0,rowsMax:3,rows:3,onKeyPress:function(e){"Enter"!==e.key||e.shiftKey||(e.preventDefault(),s.current&&!/^\s*$/.test(s.current.value)&&c&&(kt.sendMessage(i,c,s.current.value),s.current.value=""))},inputRef:s,color:"secondary"}))},Ee=n(104),ge=n.n(Ee),pe=Object(k.a)((function(e){return{guildlist:{width:"68px"},guildiconroot:{boxSizing:"border-box",borderRadius:"50%",marginTop:e.spacing(1),border:"2px solid transparent"},selectedguildicon:{border:"2px solid ".concat(e.palette.primary.light)},guildicon:{width:"64px",height:"64px",borderRadius:"64px",objectFit:"cover",backgroundColor:"dark"===e.palette.type?e.palette.grey[800]:e.palette.grey[400]},joinGuild:{marginTop:e.spacing(1),width:"64px",height:"64px",borderRadius:"64px",backgroundColor:e.palette.secondary.dark}}})),ve=n(246),fe=n(48);function be(e){return{type:a.SET_CONNECTED,payload:e}}function he(e){return{type:a.SET_MESSAGES,payload:e}}function ye(e){return{type:a.SET_SELECTED_CHANNEL,payload:e}}function Oe(e){return{type:a.SET_SELECTED_GUILD,payload:e}}function Se(e){return{type:a.SET_CHANNELS,payload:e}}function Le(){return{type:a.TOGGLE_GUILD_SETTINGS_DIALOG}}function Ge(e){return{type:a.SET_INVITES,payload:e}}var je=function(e){var t=Object(o.c)((function(e){return[e.guildList]})),n=Object(b.a)(t,1)[0],r=pe(),i=Object(o.b)();return l.a.createElement(l.a.Fragment,null,l.a.createElement(fe.b,{id:e.guildid},l.a.createElement(J.a,{className:"".concat(r.guildiconroot," ").concat(e.selected?r.selectedguildicon:void 0),key:e.guildid,onClick:function(){i({type:a.SET_SELECTED_GUILD,payload:e.guildid})}},l.a.createElement(ve.a,{title:e.guildname,placement:"right"},l.a.createElement("img",{className:r.guildicon,alt:"",src:e.picture,draggable:!1})))),l.a.createElement(fe.a,{id:e.guildid},l.a.createElement(ae.a,null,l.a.createElement(fe.c,null,l.a.createElement(re.a,{button:!0,onClick:function(){kt.leaveGuild(e.guildid)}},l.a.createElement(ce.a,{primary:"Leave Guild"}))),n&&n[e.guildid].owner?l.a.createElement(l.a.Fragment,null,l.a.createElement(fe.c,null,l.a.createElement(re.a,{button:!0,onClick:function(){return i(Le())}},l.a.createElement(ce.a,{primary:"Guild Settings"})))):void 0)))},Ce=function(){var e=pe(),t=Object(o.c)((function(e){return[e.guildList,e.selectedGuild]})),n=Object(b.a)(t,2),r=n[0],i=n[1],c=Object(o.b)();return l.a.createElement("div",{className:e.guildlist},Object.keys(r).map((function(e){return l.a.createElement(je,{guildid:e,key:e,selected:i===e,guildname:r[e].guildname,picture:r[e].picture})})),l.a.createElement(J.a,{className:e.joinGuild,onClick:function(){return c({type:a.TOGGLE_JOIN_GUILD_DIALOG})}},l.a.createElement(ve.a,{title:"Join Or Create Guild",placement:"right"},l.a.createElement(ge.a,null))))},Te=n(227),_e=n(228),ke=n(217),Ie=n(107),Ne=n.n(Ie),De=n(106),Ae=n.n(De),we=n(105),Re=n.n(we),Ue=n(108),xe=n.n(Ue),Me=Object(k.a)((function(e){return{selectedChannel:{backgroundColor:"dark"===e.palette.type?e.palette.grey[800]:e.palette.grey[400]},nested:{paddingLeft:e.spacing(4)},newChannelInput:{marginLeft:e.spacing(2),marginRight:e.spacing(2)}}})),He=function(e){var t=Object(o.c)((function(e){return[e.selectedGuild,e.selectedChannel,e.guildList]})),n=Object(b.a)(t,3),a=n[0],r=n[1],i=n[2],c=Me();return l.a.createElement(l.a.Fragment,null,l.a.createElement(fe.b,{id:e.channelid},l.a.createElement(re.a,{button:!0,key:e.channelid,className:e.channelid===r?c.selectedChannel:void 0,onClick:function(){return e.setSelectedChannel(e.channelid)}},l.a.createElement(ce.a,{secondary:"#".concat(e.channelname)}))),i[a]&&i[a].owner?l.a.createElement(fe.a,{id:e.channelid},l.a.createElement(ae.a,null,l.a.createElement(re.a,{button:!0,onClick:function(){kt.sendDeleteChannel(a,e.channelid)}},l.a.createElement(ce.a,{primary:"Delete Channel"})))):void 0)},Pe=function(){var e=Object(o.c)((function(e){return[e.channels,e.selectedGuild,e.guildList]})),t=Object(b.a)(e,3),n=t[0],a=t[1],i=t[2],c=Object(r.useState)(!1),u=Object(b.a)(c,2),s=u[0],d=u[1],m=Object(r.useState)(!1),E=Object(b.a)(m,2),g=E[0],p=E[1],v=Object(r.useRef)(null),f=Object(o.b)(),h=Me(),y=function(e){f(ye(e))};return l.a.createElement("div",null,l.a.createElement(ae.a,{style:{padding:0}},a?l.a.createElement(l.a.Fragment,null,l.a.createElement(re.a,{button:!0,onClick:function(){return d(!s)}},l.a.createElement(ce.a,{primary:"Guild Options"}),s?l.a.createElement(Re.a,null):l.a.createElement(Ae.a,null)),l.a.createElement(Te.a,{in:s,timeout:"auto",unmountOnExit:!0},l.a.createElement(ae.a,{component:"div",disablePadding:!0},i[a]&&i[a].owner?l.a.createElement(l.a.Fragment,null,l.a.createElement(re.a,{button:!0,className:h.nested,onClick:function(){kt.sendGetInvites(a),f(Le())}},l.a.createElement(_e.a,null,l.a.createElement(Ne.a,null)),l.a.createElement(ce.a,{primary:"Guild Settings"}))):void 0,l.a.createElement(re.a,{button:!0,className:h.nested,onClick:function(){kt.leaveGuild(a)}},l.a.createElement(_e.a,null,l.a.createElement(xe.a,null)),l.a.createElement(ce.a,{primary:"Leave Guild"}))))):void 0,n?Object.keys(n).map((function(e){return l.a.createElement(He,{key:e,channelid:e,channelname:n[e],setSelectedChannel:y})})):void 0,l.a.createElement("div",{className:h.newChannelInput},g?l.a.createElement(ke.a,{fullWidth:!0,autoFocus:!0,onKeyPress:function(e){"Enter"===e.key&&v.current&&(kt.sendAddChannel(a,v.current.value),p(!1))},onBlur:function(){return p(!1)},placeholder:"Channel Name",inputRef:v}):void 0),a&&i[a]&&i[a].owner?l.a.createElement(ve.a,{title:"Create Channel"},l.a.createElement(re.a,{button:!0,onClick:function(){p(!0)}},l.a.createElement(ce.a,{style:{textAlign:"center"},primary:"+"}))):void 0))},Fe=function(){var e=te(),t=Object(o.c)((function(e){return[e.messages]})),n=Object(b.a)(t,1)[0],i=Object(r.useRef)(null),c=Object(o.b)();Object(r.useEffect)((function(){i.current&&(i.current.scrollTop=i.current.scrollHeight)}),[n]);return l.a.createElement("div",{className:e.root},l.a.createElement("div",{className:e.guildlist},l.a.createElement(Ce,null)),l.a.createElement("div",{className:e.channellist},l.a.createElement(Pe,null)),l.a.createElement("div",{className:e.chatArea},l.a.createElement("div",{className:e.messages,ref:i,onKeyDown:function(e){"Tab"!==e.key&&c({type:a.FOCUS_CHAT_INPUT})},tabIndex:-1},l.a.createElement(se,null)),l.a.createElement("div",{className:e.input},l.a.createElement(me,null))))},We=n(229),Je=function(){var e=Object(o.c)((function(e){return[e.joinGuildDialog,e.theme.inputStyle]})),t=Object(b.a)(e,2),n=t[0],i=t[1],c=Object(r.useState)(""),u=Object(b.a)(c,1)[0],s=Object(r.useState)(""),d=Object(b.a)(s,1)[0],E=Object(r.useRef)(null),g=Object(r.useRef)(null),p=Object(o.b)();return l.a.createElement(D.a,{open:n,onClose:function(){return p({type:a.TOGGLE_JOIN_GUILD_DIALOG})}},l.a.createElement(w.a,null,l.a.createElement(We.a,{container:!0,spacing:1},l.a.createElement(We.a,{item:!0,xs:6},l.a.createElement("div",null,l.a.createElement(S.a,{variant:"h5"},"Join Guild"),l.a.createElement(de.a,{label:"Join Code",variant:i,fullWidth:!0,inputRef:E}),l.a.createElement(S.a,{color:"error",variant:"body2"},u||l.a.createElement("br",null)),l.a.createElement(m.a,{onClick:function(){E.current&&E.current.value&&kt.joinGuild(E.current.value)}},"Join Guild"))),l.a.createElement(We.a,{item:!0,xs:6},l.a.createElement("div",null,l.a.createElement(S.a,{variant:"h5"},"Create Guild"),l.a.createElement(de.a,{label:"Guild Name",variant:i,fullWidth:!0,inputRef:g}),l.a.createElement(S.a,{color:"error",variant:"body2"},d||l.a.createElement("br",null)),l.a.createElement(m.a,{onClick:function(){g.current&&g.current.value&&kt.createGuild(g.current.value)}},"Create Guild"))))))},Be=n(109),Ye=n.n(Be),Ve=n(230),Ke=n(231),ze=n(232),$e=n(233),qe=n(234),Qe=n(110),Xe=n.n(Qe),Ze=n(113),et=n.n(Ze),tt=n(69),nt=n.n(tt),at=n(112),rt=n.n(at),lt=n(111),it=n.n(lt),ct=Object(k.a)((function(e){return{guildIcon:{width:"100px",height:"100px"},menuEntry:{marginTop:e.spacing(2)},clipboardbtn:{marginLeft:e.spacing(3)}}})),ot=function(){var e=Object(o.c)((function(e){return[e.guildSettingsDialog,e.selectedGuild,e.theme.inputStyle,e.guildList,e.invites]})),t=Object(b.a)(e,5),n=t[0],i=t[1],c=t[2],u=t[3],s=t[4],d=Object(o.b)(),E=Object(r.useRef)(null),g=Object(r.useState)(u[i]?u[i].guildname:void 0),v=Object(b.a)(g,2),f=v[0],L=v[1],G=Object(r.useState)(null),j=Object(b.a)(G,2),C=j[0],T=j[1],_=Object(r.useState)(u[i]?u[i].picture:void 0),k=Object(b.a)(_,2),I=k[0],N=k[1],A=ct();return l.a.createElement(D.a,{open:n,onClose:function(){return d({type:a.TOGGLE_GUILD_SETTINGS_DIALOG})},fullScreen:!0},l.a.createElement(h.a,{style:{position:"relative"}},l.a.createElement(y.a,null,l.a.createElement(O.a,{edge:"start",color:"inherit",onClick:function(){return d({type:a.TOGGLE_GUILD_SETTINGS_DIALOG})}},l.a.createElement(nt.a,null)),l.a.createElement(S.a,{variant:"h6"},"Guild Settings"))),l.a.createElement(w.a,null,l.a.createElement("div",{style:{width:"33%"}},l.a.createElement("input",{type:"file",id:"file",multiple:!0,ref:E,style:{display:"none"},onChange:function(e){if(e.currentTarget.files&&e.currentTarget.files.length>0){var t=e.currentTarget.files[0];if(T(t),t.type.startsWith("image/")&&t.size<33554432){var n=new FileReader;n.readAsDataURL(t),n.addEventListener("load",(function(){"string"===typeof n.result&&N(n.result)}))}}}}),l.a.createElement(J.a,{style:{borderRadius:"50%"},onClick:function(){E.current&&E.current.click()}},l.a.createElement(ie.a,{className:A.guildIcon,src:I})),l.a.createElement(de.a,{label:"Guild Name",fullWidth:!0,variant:c,className:A.menuEntry,value:f,onChange:function(e){return L(e.currentTarget.value)}}),l.a.createElement(m.a,{variant:"contained",color:"secondary",className:A.menuEntry,onClick:function(){if(u[i]){if(I!==u[i].picture&&C){var e=new FormData;e.append("file",C),Ye.a.post("http://".concat(window.location.hostname,":2288/api/rest/fileupload"),e,{}).then((function(e){if(e.data){var t=e.data;kt.sendGuildPictureUpdate(i,"http://".concat(window.location.hostname,":2288/filestore/").concat(t))}})).catch((function(){p.b.error("Failed to update guild icon")}))}u[i].guildname!==f&&f&&kt.sendGuildNameUpdate(i,f)}}},"Save Changes"),l.a.createElement(S.a,{variant:"h4",className:A.menuEntry},"Join Codes"),l.a.createElement(Ve.a,null,l.a.createElement(Ke.a,null,l.a.createElement(ze.a,null,l.a.createElement($e.a,null,"Join Code"),l.a.createElement($e.a,null,"Amount Used"),l.a.createElement($e.a,null,"Actions"))),l.a.createElement(qe.a,null,Object.keys(s).map((function(e){return l.a.createElement(ze.a,{key:e},l.a.createElement($e.a,{component:"th",scope:"row"},e),l.a.createElement($e.a,{component:"th",scope:"row"},s[e]),l.a.createElement($e.a,{component:"td",scope:"row"},l.a.createElement(ve.a,{title:"Copy Invite Link"},l.a.createElement(O.a,{onClick:function(){Xe()("http://".concat(window.location.hostname).concat(window.location.port?":"+window.location.port:"","/invite/").concat(e)),p.b.info("Successfully copied to clipboard!")}},l.a.createElement(it.a,null))),l.a.createElement(ve.a,{title:"Delete Invite Link"},l.a.createElement(O.a,{onClick:function(){return t=e,void kt.sendDeleteInvite(t,i);var t}},l.a.createElement(rt.a,null)))))})))),l.a.createElement(m.a,{fullWidth:!0,onClick:function(){kt.sendCreateInvite(i)}},l.a.createElement(et.a,null)))))},ut=Object(k.a)((function(e){return{guildIcon:{width:"100px",height:"100px"},menuEntry:{marginTop:e.spacing(2)},clipboardbtn:{marginLeft:e.spacing(3)}}})),st=function(){var e=Object(o.c)((function(e){return[e.userSettingsDialog,e.userSettingsDialog]})),t=Object(b.a)(e,2),n=t[0],i=t[1],c=Object(r.useRef)(null),u=Object(r.useState)(""),s=Object(b.a)(u,2),d=s[0],E=s[1],g=Object(o.b)(),p=ut();return l.a.createElement(D.a,{open:n,onClose:function(){return g({type:a.TOGGLE_USER_SETTINGS_DIALOG})},fullScreen:!0},l.a.createElement(h.a,{style:{position:"relative"}},l.a.createElement(y.a,null,l.a.createElement(O.a,{edge:"start",onClick:function(){return g({type:a.TOGGLE_USER_SETTINGS_DIALOG})}},l.a.createElement(nt.a,null)),l.a.createElement(S.a,{variant:"h6"},"User Settings"))),l.a.createElement(w.a,null,l.a.createElement("div",{style:{width:"33%"}},l.a.createElement("input",{type:"file",id:"file",multiple:!0,ref:c,style:{display:"none"}}),l.a.createElement(J.a,{style:{borderRadius:"50%"},onClick:function(){c.current&&c.current.click()}},l.a.createElement(ie.a,{className:p.guildIcon})),l.a.createElement(de.a,{label:"Username",fullWidth:!0,variant:i,className:p.menuEntry,value:d,onChange:function(e){return E(e.currentTarget.value)}}),l.a.createElement(m.a,{variant:"contained",color:"secondary",className:p.menuEntry},"Save Changes"))))},dt=function(){var e=ee(),t=Object(o.b)(),n=Object(u.g)(),i=n.selectedguildparam,c=n.selectedchannelparam,s=Object(o.c)((function(e){return[e.connected,e.channels,e.invites,e.selectedGuild,e.themeDialog,e.joinGuildDialog,e.guildSettingsDialog,e.userSettingsDialog]})),d=Object(b.a)(s,8),m=d[0],E=d[1],g=d[2],h=d[3],y=d[4],O=d[5],S=d[6],L=d[7],G=Object(u.f)();return Object(r.useEffect)((function(){i&&(t(Oe(i)),kt.events.addListener("open",(function(){kt.getChannels(i),kt.getMessages(i),kt.events.removeCurrentListener()}))),c&&t(ye(c))}),[i,c,t]),Object(r.useEffect)((function(){m&&kt.getGuilds()}),[m]),Object(r.useEffect)((function(){m&&(t(he([])),t(ye(void 0)),kt.getMessages(h),kt.getChannels(h))}),[h]),Object(r.useEffect)((function(){return kt.conn.readyState!==WebSocket.OPEN&&kt.conn.readyState!==WebSocket.CONNECTING||"string"!==typeof localStorage.getItem("token")?void G.push("/"):(kt.events.addListener("getguilds",(function(e){var n,r=e.guilds;0===Object.keys(r).length&&(t(he([])),t(ye(void 0)),t(Oe(void 0)),t(Se({}))),t((n=r,{type:a.SET_GUILDS,payload:n}))})),kt.events.addListener("getmessages",(function(e){e.messages&&t(he(e.messages.reverse()))})),kt.events.addListener("message",(function(e){var n;"string"===typeof e.userid&&"number"===typeof e.createdat&&"string"===typeof e.guild&&"string"===typeof e.message&&t((n=e,{type:a.ADD_MESSAGE,payload:n}))})),kt.events.addListener("getchannels",(function(e){console.log(e),"object"===typeof e&&t(Se(e.channels))})),kt.events.addListener("deauth",(function(){p.b.warn("Your session has expired. Please login again"),G.push("/")})),kt.events.addListener("leaveguild",(function(e){"string"!==typeof e.message?kt.getGuilds():p.b.error(e.message)})),kt.events.addListener("joinguild",(function(e){e.message||(kt.getGuilds(),t({type:a.TOGGLE_JOIN_GUILD_DIALOG}))})),kt.events.addListener("createguild",(function(e){e.message||(kt.getGuilds(),t({type:a.TOGGLE_JOIN_GUILD_DIALOG}))})),kt.events.addListener("updateguildpicture",(function(e){var n,r;!0===e.success&&e.picture&&e.guild?(t((n=e.guild,r=e.picture,{type:a.SET_GUILD_PICTURE,payload:{guild:n,picture:r}})),S&&t(Le())):p.b.error("Error saving guild")})),kt.events.addListener("updateguildname",(function(e){var n,r;!0===e.success&&e.name&&e.guild?(t((n=e.guild,r=e.name,{type:a.SET_GUILD_NAME,payload:{guild:n,name:r}})),S&&t(Le())):p.b.error("Error saving guild")})),kt.events.addListener("getinvites",(function(e){e.invites&&e.guild&&t(Ge(e.invites))})),kt.events.addListener("addguildchannel",(function(e){!0===e.success&&e.guild&&e.channelname&&e.channelid&&t(Se(Object(f.a)({},E,Object(v.a)({},e.channelid,e.channelname))))})),kt.events.addListener("deleteguildchannel",(function(e){if(!0===e.success&&e.guild&&e.channelid){var n=Object(f.a)({},E);delete n[e.channelid],t(Se(Object(f.a)({},n)))}})),kt.events.addListener("deleteinvite",(function(e){if(!0===e.success&&e.invite){var n=Object(f.a)({},g);delete n[e.invite],t(Ge(n))}})),kt.events.addListener("createinvite",(function(e){if(!0===e.success&&e.invite){var n=Object(f.a)({},g,Object(v.a)({},e.invite,0));t(Ge(n))}})),kt.events.addListener("getuser",(function(e){var n,r,l;"string"===typeof e.userid&&"string"===typeof e.username&&"string"===typeof e.avatar&&t((n=e.userid,r=e.username,l=e.avatar,{type:a.SET_USER,payload:{userid:n,username:r,avatar:l}}))})),function(){kt.events.removeAllListeners("getguilds"),kt.events.removeAllListeners("getmessages"),kt.events.removeAllListeners("message"),kt.events.removeAllListeners("getchannels"),kt.events.removeAllListeners("deauth"),kt.events.removeAllListeners("leaveguild"),kt.events.removeAllListeners("joinguild"),kt.events.removeAllListeners("createguild"),kt.events.removeAllListeners("updateguildpicture"),kt.events.removeAllListeners("updateguildname"),kt.events.removeAllListeners("getinvites"),kt.events.removeAllListeners("addguildchannel"),kt.events.removeAllListeners("deleteguildchannel"),kt.events.removeAllListeners("deleteinvite"),kt.events.removeAllListeners("createinvite"),kt.events.removeAllListeners("getusername")})}),[G,t,S,!1,E,g]),l.a.createElement("div",{className:e.root},y?l.a.createElement(Z,null):void 0,O?l.a.createElement(Je,null):void 0,S?l.a.createElement(ot,null):void 0,L?l.a.createElement(st,null):void 0,l.a.createElement(N,null),l.a.createElement("div",{className:e.navFill})," ",l.a.createElement(Fe,null))},mt=n(172),Et=n(239),gt=n(235),pt=Object(k.a)((function(e){return{form:{width:"60%",height:"60%",position:"relative"},root:{width:"100vw",height:"100vh",display:"flex",alignItems:"center",justifyContent:"center"}}})),vt=Object(k.a)((function(e){return{root:{paddingLeft:e.spacing(1),paddingRight:e.spacing(1),paddingTop:e.spacing(1),paddingBottom:e.spacing(1)},submitBtn:{position:"absolute",bottom:e.spacing(1),left:e.spacing(1)}}})),ft=function(){var e=Object(u.f)(),t=vt(),n=l.a.useState(void 0),a=Object(b.a)(n,2),i=a[0],c=a[1],o=Object(r.useRef)(void 0),s=Object(r.useRef)(void 0);return Object(r.useEffect)((function(){return kt.events.addListener("loginerror",(function(e){"string"===typeof e.message&&c(e.message)})),kt.events.addListener("token",(function(t){"string"===typeof t.token&&"string"===typeof t.userid&&(localStorage.setItem("token",t.token),localStorage.setItem("userid",t.userid),e.push("/app"))})),function(){kt.events.removeAllListeners("loginerror"),kt.events.removeAllListeners("token")}}),[e]),l.a.createElement("div",{className:t.root},l.a.createElement("form",{onSubmit:function(e){return e.preventDefault()}},l.a.createElement(de.a,{label:"Email",type:"email",name:"email",autoComplete:"email",margin:"normal",fullWidth:!0,inputRef:o}),l.a.createElement(de.a,{label:"Password",type:"password",name:"password",margin:"normal",fullWidth:!0,inputRef:s}),i?l.a.createElement(S.a,{variant:"subtitle1",color:"error"},i):void 0,l.a.createElement(m.a,{variant:"contained",color:"primary",className:t.submitBtn,onClick:function(){kt.conn.readyState===WebSocket.CLOSED?p.b.error("Can't login, trouble connecting to server"):o.current&&s.current&&o.current.value.length&&s.current.value?kt.login(o.current.value,s.current.value):p.b.error("Can't login, missing email or password")},type:"submit"},"Log In")))},bt=Object(k.a)((function(e){return{root:{paddingLeft:e.spacing(1),paddingRight:e.spacing(1),paddingTop:e.spacing(1),paddingBottom:e.spacing(1)},submitBtn:{position:"absolute",bottom:e.spacing(1),left:e.spacing(1)}}})),ht=function(){var e=bt(),t=Object(u.f)(),n=l.a.useState(void 0),a=Object(b.a)(n,2),i=a[0],c=a[1],o=Object(r.useRef)(void 0),s=Object(r.useRef)(void 0),d=Object(r.useRef)(void 0);return Object(r.useEffect)((function(){return kt.events.addListener("registererror",(function(e){"string"===typeof e.message&&c(e.message)})),kt.events.addListener("token",(function(e){"string"===typeof e.token&&"string"===typeof e.userid&&(localStorage.setItem("token",e.token),localStorage.setItem("userid",e.userid),t.push("/app"))})),function(){kt.events.removeAllListeners("registererror"),kt.events.removeAllListeners("token")}}),[t]),l.a.createElement("div",{className:e.root},l.a.createElement("form",{onSubmit:function(e){return e.preventDefault()}},l.a.createElement(de.a,{label:"Email",type:"email",name:"email",autoComplete:"email",margin:"normal",fullWidth:!0,inputRef:o}),l.a.createElement(de.a,{label:"Username",type:"text",name:"usernamee",autoComplete:"username",margin:"normal",fullWidth:!0,inputRef:s}),l.a.createElement(de.a,{label:"Password",type:"password",name:"password",autoComplete:"new-password",margin:"normal",fullWidth:!0,inputRef:d}),l.a.createElement(de.a,{label:"Confirm Password",type:"password",name:"confirmpassword",autoComplete:"none",margin:"normal",fullWidth:!0}),i?l.a.createElement(S.a,{variant:"subtitle1",color:"error"},i):void 0,l.a.createElement(m.a,{variant:"contained",color:"primary",className:e.submitBtn,onClick:function(){kt.conn.readyState===WebSocket.CLOSED?p.b.error("Can't register, trouble connecting to server"):o.current&&s.current&&d.current&&o.current.value&&d.current.value&&s.current.value?kt.register(o.current.value,s.current.value,d.current.value):p.b.error("Can't register, missing email, username, or password")},type:"submit"},"Log In")))},yt=function(){var e=pt(),t=l.a.useState(0),n=Object(b.a)(t,2),a=n[0],r=n[1];return l.a.createElement("div",{className:e.root},l.a.createElement(mt.a,{className:e.form},l.a.createElement(Et.a,{value:a,onChange:function(e,t){return r(t)},variant:"fullWidth",indicatorColor:"primary"},l.a.createElement(gt.a,{label:"Login",id:"form-tab-0"}),l.a.createElement(gt.a,{label:"Register",id:"form-tab-1"})),0===a?l.a.createElement(ft,null):l.a.createElement(ht,null)))},Ot=n(115),St=n(116),Lt=n(117),Gt=function(){function e(){var t=this;Object(Ot.a)(this,e),this.conn=void 0,this.events=void 0,this.connect=function(){t.conn=new WebSocket("ws://".concat(window.location.hostname,":2288/api/socket")),t.conn.addEventListener("open",(function(){return t.events.emit("open")})),t.conn.addEventListener("close",(function(){return t.events.emit("close")})),t.conn.addEventListener("error",(function(){return t.events.emit("error")})),t.conn.onmessage=function(e){var n=JSON.parse(e.data);if("string"===typeof n.type&&"object"===typeof n.data){var a=n;t.events.emit(a.type,a.data)}else console.warn("Unsupported packet received"),console.log(n)}},this.conn=new WebSocket("ws://".concat(window.location.hostname,":2288/api/socket")),this.events=new Lt.EventEmitter,this.conn.addEventListener("open",(function(){return t.events.emit("open")})),this.conn.addEventListener("close",(function(){return t.events.emit("close")})),this.conn.addEventListener("error",(function(){return t.events.emit("error")})),this.conn.onmessage=function(e){var n=JSON.parse(e.data);if("string"===typeof n.type&&"object"===typeof n.data){var a=n;t.events.emit(a.type,a.data)}else console.warn("Unsupported packet received"),console.log(n)}}return Object(St.a)(e,[{key:"emitEvent",value:function(e,t){this.conn.readyState===WebSocket.OPEN&&this.conn.send(JSON.stringify({type:e,data:t}))}},{key:"login",value:function(e,t){this.emitEvent("login",{email:e,password:t})}},{key:"register",value:function(e,t,n){this.emitEvent("register",{email:e,username:t,password:n})}},{key:"getGuilds",value:function(){this.emitEvent("getguilds",{token:localStorage.getItem("token")})}},{key:"getMessages",value:function(e){this.emitEvent("getmessages",{token:localStorage.getItem("token"),guild:e})}},{key:"sendMessage",value:function(e,t,n){this.emitEvent("message",{token:localStorage.getItem("token"),guild:e,channel:t,message:n})}},{key:"getChannels",value:function(e){this.emitEvent("getchannels",{token:localStorage.getItem("token"),guild:e})}},{key:"joinGuild",value:function(e){this.emitEvent("joinguild",{token:localStorage.getItem("token"),invite:e})}},{key:"createGuild",value:function(e){this.emitEvent("createguild",{token:localStorage.getItem("token"),guildname:e})}},{key:"leaveGuild",value:function(e){this.emitEvent("leaveguild",{token:localStorage.getItem("token"),guild:e})}},{key:"sendGuildNameUpdate",value:function(e,t){this.emitEvent("updateguildname",{token:localStorage.getItem("token"),guild:e,name:t})}},{key:"sendGuildPictureUpdate",value:function(e,t){this.emitEvent("updateguildpicture",{token:localStorage.getItem("token"),guild:e,picture:t})}},{key:"sendGetInvites",value:function(e){this.emitEvent("getinvites",{token:localStorage.getItem("token"),guild:e})}},{key:"sendAddChannel",value:function(e,t){this.emitEvent("addchannel",{token:localStorage.getItem("token"),guild:e,channel:t})}},{key:"sendDeleteChannel",value:function(e,t){this.emitEvent("deletechannel",{token:localStorage.getItem("token"),guild:e,channel:t})}},{key:"sendDeleteInvite",value:function(e,t){this.emitEvent("deleteinvite",{token:localStorage.getItem("token"),invite:e,guild:t})}},{key:"sendCreateInvite",value:function(e){this.emitEvent("createinvite",{token:localStorage.getItem("token"),guild:e})}},{key:"sendGetUser",value:function(e){this.emitEvent("getuser",{token:localStorage.getItem("token"),userid:e})}}]),e}(),jt=n(118),Ct=Object(jt.a)((function(e){return{"@global":{"::-webkit-scrollbar":{width:"10px"},"::-webkit-scrollbar-thumb:hover":{backgroundColor:"light"===e.palette.type?"rgb(150, 150, 150)":"rgb(100, 100, 100)"},"::-webkit-scrollbar-track":{backgroundColor:"light"===e.palette.type?"rgb(245, 245, 245)":"rgb(46, 46, 46)"},"::-webkit-scrollbar-thumb":{backgroundColor:"light"===e.palette.type?"rgb(200, 200, 200)":"rgb(64, 64, 64)"},"::-webkit-scrollbar-corner":{backgroundColor:"light"===e.palette.type?"rgb(200, 200, 200)":"rgb(64, 64, 64)"},"*":{scrollbarColor:"".concat("light"===e.palette.type?"rgb(200, 200, 200)":"rgb(64, 64, 64)"," ").concat("light"===e.palette.type?"rgb(245, 245, 245)":"rgb(46, 46, 46)")}}}})),Tt=(n(168),Object(k.a)((function(e){return{errorRoot:{textAlign:"center"},errorMsg:{paddingTop:e.spacing(10)},errorBtn:{marginTop:e.spacing(2)}}}))),_t=function(){var e=Object(u.g)().invitecode,t=Object(u.f)(),n=Object(r.useState)(null),a=Object(b.a)(n,2),i=a[0],c=a[1],o=Tt();return Object(r.useEffect)((function(){kt.events.addListener("joinguild",(function(e){console.log(e),e.message?c(e.message):(c(null),t.push("/app"))})),kt.events.addListener("open",(function(){e&&kt.joinGuild(e)}))}),[t,e]),l.a.createElement("div",null,i?l.a.createElement("div",{className:o.errorRoot},l.a.createElement(S.a,{variant:"h1",align:"center",className:o.errorMsg},"404",l.a.createElement("br",null),i),l.a.createElement(m.a,{variant:"contained",color:"secondary",className:o.errorBtn,onClick:function(){return t.push("/")}},"Return To Login")):void 0)},kt=new Gt,It=!1,Nt=function(){var e=Object(o.b)();return Ct(),Object(r.useEffect)((function(){return kt.events.addListener("close",(function(){It||(p.b.error("You have lost connection to the server"),e(be(!1)),It=!0),setTimeout(kt.connect,3e3)})),kt.events.addListener("open",(function(){It&&p.b.success("You have reconnected to the server"),e(be(!0))})),function(){kt.events.removeAllListeners("close"),kt.events.removeAllListeners("open")}}),[e]),l.a.createElement(l.a.Fragment,null,l.a.createElement(d.a,null),l.a.createElement(p.a,null),l.a.createElement(s.a,null,l.a.createElement(u.c,null,l.a.createElement(u.a,{exact:!0,path:"/"},l.a.createElement(yt,null)),l.a.createElement(u.a,{exact:!0,path:"/app/:selectedguildparam?/:selectedchannelparam?"},l.a.createElement(dt,null)),l.a.createElement(u.a,{exact:!0,path:"/invite/:invitecode"},l.a.createElement(_t,null)),l.a.createElement(u.a,{exact:!0,path:"/bruh"},l.a.createElement(m.a,{onClick:function(){p.b.info("GET BRUHED ON KID")}},"Bruh Button")))))},Dt=function(){var e=Object(o.c)((function(e){return e.theme})),t=Object(E.a)({palette:{primary:e.primary,secondary:e.secondary,type:e.type}});return l.a.createElement("div",{className:"root"},l.a.createElement(g.a,{theme:t},l.a.createElement(Nt,null)))},At=n(44),wt=n(79),Rt=n(120),Ut=n.n(Rt),xt={theme:{type:"dark",primary:B.a,secondary:Y.a,inputStyle:"filled"},guildList:{},themeDialog:!1,connected:!1,selectedGuild:"",messages:[],invites:{},channels:{},selectedChannel:void 0,joinGuildDialog:!1,guildSettingsDialog:!1,users:{},userSettingsDialog:!1,chatInputFocus:!1};var Mt={key:"root",storage:Ut.a,whitelist:["theme"]},Ht=Object(wt.a)(Mt,(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:xt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case a.INVERT_THEME:return Object(f.a)({},e,{theme:Object(f.a)({},e.theme,{type:"dark"===e.theme.type?"light":"dark"})});case a.TOGGLE_THEME_DIALOG:return Object(f.a)({},e,{themeDialog:!e.themeDialog});case a.CHANGE_PRIMARY:return Object(f.a)({},e,{theme:Object(f.a)({},e.theme,{primary:t.payload})});case a.CHANGE_SECONDARY:return Object(f.a)({},e,{theme:Object(f.a)({},e.theme,{secondary:t.payload})});case a.SET_CONNECTED:return Object(f.a)({},e,{connected:t.payload});case a.SET_GUILDS:return Object(f.a)({},e,{guildList:t.payload});case a.SET_SELECTED_GUILD:return Object(f.a)({},e,{selectedGuild:t.payload});case a.ADD_MESSAGE:return Object(f.a)({},e,{messages:[].concat(Object(ne.a)(e.messages),[t.payload])});case a.SET_MESSAGES:return Object(f.a)({},e,{messages:t.payload});case a.SET_INPUT_STYLE:return Object(f.a)({},e,{theme:Object(f.a)({},e.theme,{inputStyle:t.payload})});case a.SET_CHANNELS:return Object(f.a)({},e,{channels:t.payload});case a.SET_SELECTED_CHANNEL:return Object(f.a)({},e,{selectedChannel:t.payload});case a.TOGGLE_JOIN_GUILD_DIALOG:return Object(f.a)({},e,{joinGuildDialog:!e.joinGuildDialog});case a.TOGGLE_GUILD_SETTINGS_DIALOG:return Object(f.a)({},e,{guildSettingsDialog:!e.guildSettingsDialog});case a.SET_GUILD_PICTURE:return Object(f.a)({},e,{guildList:Object(f.a)({},e.guildList,Object(v.a)({},t.payload.guild,Object(f.a)({},e.guildList[t.payload.guild],{picture:t.payload.picture})))});case a.SET_GUILD_NAME:return Object(f.a)({},e,{guildList:Object(f.a)({},e.guildList,Object(v.a)({},t.payload.guild,Object(f.a)({},e.guildList[t.payload.guild],{guildname:t.payload.name})))});case a.SET_INVITES:return Object(f.a)({},e,{invites:t.payload});case a.SET_USER:return Object(f.a)({},e,{users:Object(f.a)({},e.users,Object(v.a)({},t.payload.userid,t.payload))});case a.TOGGLE_USER_SETTINGS_DIALOG:return Object(f.a)({},e,{userSettingsDialog:!e.userSettingsDialog});case a.FOCUS_CHAT_INPUT:return Object(f.a)({},e,{chatInputFocus:!e.chatInputFocus});default:return e}})),Pt=n(121),Ft=function(){var e=Object(At.c)(Ht);return{store:e,persistor:Object(wt.b)(e)}}(),Wt=Ft.store,Jt=Ft.persistor;c.a.render(l.a.createElement((function(){return l.a.createElement(o.a,{store:Wt},l.a.createElement(Pt.a,{loading:null,persistor:Jt},l.a.createElement(Dt,null)))}),null),document.getElementById("root"))}},[[132,1,2]]]);
//# sourceMappingURL=main.c95dfcdd.chunk.js.map