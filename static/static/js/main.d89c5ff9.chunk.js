(this["webpackJsonpharmony-app"]=this["webpackJsonpharmony-app"]||[]).push([[0],{129:function(e,t,n){e.exports=n(166)},138:function(e,t,n){},139:function(e,t,n){},165:function(e,t,n){},166:function(e,t,n){"use strict";n.r(t);var a,r=n(0),l=n.n(r),i=n(11),c=n.n(i),o=n(6),u=(n(138),n(139),n(16)),s=n(117),d=n(231),m=n(218),E=n(118),g=n(232),p=(n(140),n(20)),f=n(41),v=n(8),b=n(198),h=n(200),y=n(201),O=n(57),S=n(98),G=n.n(S),L=n(99),j=n.n(L),T=n(100),C=n.n(T),_=n(169),k=Object(_.a)((function(e){return{leftMenuBtn:{marginRight:e.spacing(1)},title:{flexGrow:1}}}));!function(e){e[e.INVERT_THEME=0]="INVERT_THEME",e[e.TOGGLE_THEME_DIALOG=1]="TOGGLE_THEME_DIALOG",e[e.CHANGE_PRIMARY=2]="CHANGE_PRIMARY",e[e.CHANGE_SECONDARY=3]="CHANGE_SECONDARY",e[e.SET_CONNECTED=4]="SET_CONNECTED",e[e.SET_GUILDS=5]="SET_GUILDS",e[e.SET_SELECTED_GUILD=6]="SET_SELECTED_GUILD",e[e.ADD_MESSAGE=7]="ADD_MESSAGE",e[e.SET_MESSAGES=8]="SET_MESSAGES",e[e.SET_INPUT_STYLE=9]="SET_INPUT_STYLE",e[e.SET_CHANNELS=10]="SET_CHANNELS",e[e.SET_SELECTED_CHANNEL=11]="SET_SELECTED_CHANNEL",e[e.TOGGLE_JOIN_GUILD_DIALOG=12]="TOGGLE_JOIN_GUILD_DIALOG",e[e.TOGGLE_GUILD_SETTINGS_DIALOG=13]="TOGGLE_GUILD_SETTINGS_DIALOG",e[e.SET_GUILD_PICTURE=14]="SET_GUILD_PICTURE",e[e.SET_GUILD_NAME=15]="SET_GUILD_NAME",e[e.SET_INVITES=16]="SET_INVITES",e[e.SET_USER=17]="SET_USER",e[e.TOGGLE_USER_SETTINGS_DIALOG=18]="TOGGLE_USER_SETTINGS_DIALOG",e[e.SET_CHAT_INPUT=19]="SET_CHAT_INPUT"}(a||(a={}));var I=function(){var e=k(),t=Object(o.b)();return l.a.createElement(b.a,{position:"absolute"},l.a.createElement(h.a,null,l.a.createElement(y.a,{edge:"start",color:"inherit",className:e.leftMenuBtn},l.a.createElement(G.a,null)),l.a.createElement(O.a,{variant:"h6",className:e.title},"Harmony"),l.a.createElement(y.a,{edge:"end",color:"inherit",onClick:function(){return t({type:a.TOGGLE_THEME_DIALOG})}},l.a.createElement(j.a,null)),l.a.createElement(y.a,{edge:"end",color:"inherit",onClick:function(){return t({type:a.TOGGLE_USER_SETTINGS_DIALOG})}},l.a.createElement(C.a,null))))},N=n(15),D=n(237),A=n(207),w=n(208),R=n(209),U=n(210),x=n(239),M=n(211),H=n(236),P=n(233),W=n(216),J=n(217),B=n(73),F=n(72),Y=n(202),V=n(203),K=n(204),z=n(205),$=n(71),q=n(52),Q=n.n(q),X=function(e){return l.a.createElement("div",null,l.a.createElement(O.a,null,e.label),l.a.createElement("div",{style:{display:"flex"}},l.a.createElement(B.a,{style:{backgroundColor:F.a[500],width:"40px",height:"40px"},onClick:function(){return e.setColor(F.a)}},e.color===F.a?l.a.createElement(Q.a,null):void 0),l.a.createElement(B.a,{style:{backgroundColor:Y.a[500],width:"40px",height:"40px"},onClick:function(){return e.setColor(Y.a)}},e.color===Y.a?l.a.createElement(Q.a,null):void 0),l.a.createElement(B.a,{style:{backgroundColor:V.a[500],width:"40px",height:"40px"},onClick:function(){return e.setColor(V.a)}},e.color===V.a?l.a.createElement(Q.a,null):void 0),l.a.createElement(B.a,{style:{backgroundColor:K.a[500],width:"40px",height:"40px"},onClick:function(){return e.setColor(K.a)}},e.color===K.a?l.a.createElement(Q.a,null):void 0),l.a.createElement(B.a,{style:{backgroundColor:z.a[500],width:"40px",height:"40px"},onClick:function(){return e.setColor(z.a)}},e.color===z.a?l.a.createElement(Q.a,null):void 0),l.a.createElement(B.a,{style:{backgroundColor:$.a[500],width:"40px",height:"40px"},onClick:function(){return e.setColor($.a)}},e.color===$.a?l.a.createElement(Q.a,null):void 0)))},Z=function(){var e=Object(o.c)((function(e){return e.themeDialog})),t=Object(o.c)((function(e){return e.theme.type})),n=Object(r.useState)(F.a),i=Object(N.a)(n,2),c=i[0],u=i[1],s=Object(r.useState)(Y.a),d=Object(N.a)(s,2),E=d[0],g=d[1],p=Object(o.c)((function(e){return e.inputStyle})),f=Object(o.b)();return Object(r.useEffect)((function(){f({type:a.CHANGE_PRIMARY,payload:c})}),[c,f]),Object(r.useEffect)((function(){f({type:a.CHANGE_SECONDARY,payload:E})}),[E,f]),l.a.createElement(D.a,{open:e,onClose:function(){return f({type:a.TOGGLE_THEME_DIALOG})}},l.a.createElement(A.a,null,"Customize Theme"),l.a.createElement(w.a,null,l.a.createElement(R.a,{component:"fieldset"},l.a.createElement(U.a,{component:"legend"},"Theme Type"),l.a.createElement(x.a,{value:t,row:!0,onChange:function(e){return f({type:a.INVERT_THEME})}},l.a.createElement(M.a,{value:"light",control:l.a.createElement(H.a,{color:"secondary"}),label:"Light",labelPlacement:"end"}),l.a.createElement(M.a,{value:"dark",control:l.a.createElement(H.a,{color:"secondary"}),label:"Dark",labelPlacement:"end"}))),l.a.createElement(X,{color:c,setColor:u,label:"Primary Color"}),l.a.createElement(X,{color:E,setColor:g,label:"Secondary Color"}),l.a.createElement(O.a,null,"Text Input Style"),l.a.createElement(P.a,{value:p||"standard",onChange:function(e){"string"===typeof e.target.value&&f({type:a.SET_INPUT_STYLE,payload:e.target.value})},variant:p,fullWidth:!0},l.a.createElement(W.a,{value:"standard"},"Standard"),l.a.createElement(W.a,{value:"filled"},"Filled"),l.a.createElement(W.a,{value:"outlined"},"Outlined"))),l.a.createElement(J.a,null,l.a.createElement(m.a,{color:"primary",onClick:function(){return f({type:a.TOGGLE_THEME_DIALOG})}},"Close")))},ee=Object(_.a)((function(e){return{root:{display:"flex",height:"100%",flexDirection:"column"},leftMenuBtn:{marginRight:e.spacing(1)},title:{flexGrow:1},navFill:Object(v.a)({},e.mixins.toolbar)}})),te=Object(_.a)((function(e){return{root:{flex:1,display:"flex",flexDirection:"row",flexGrow:1,width:"100%",height:"100%"},guildlist:{backgroundColor:"dark"===e.palette.type?e.palette.grey[900]:e.palette.grey[200],padding:e.spacing(1),borderRight:"1px solid grey"},channellist:{backgroundColor:"dark"===e.palette.type?e.palette.grey[900]:e.palette.grey[300],padding:0,width:"300px",overflowY:"auto"},guildiconroot:{borderRadius:"64px"},guildicon:{width:"64px",height:"64px"},chatArea:{display:"flex",flexDirection:"column",flexFlow:"column",width:"100%",height:"100%"},messages:{width:"100%",flex:"1 1 auto",overflow:"auto"},input:{width:"100%"}}})),ne=n(215),ae=n(168),re=n(219),le=n(220),ie=n(221),ce=function(e){var t=new Date(0);return t.setUTCSeconds(e)," - ".concat(t.toDateString()," at ").concat(t.toLocaleTimeString())},oe=function(e){return Object(r.useEffect)((function(){e.username||Ct.sendGetUser(e.userid)}),[e]),l.a.createElement(ae.a,{alignItems:"flex-start"},l.a.createElement(re.a,null,l.a.createElement(le.a,{alt:e.userid,src:e.avatar?"http://localhost:2288/filestore/".concat(e.avatar):void 0})),l.a.createElement(ie.a,{primary:l.a.createElement(l.a.Fragment,null,e.username||e.userid,l.a.createElement(O.a,{component:"span",variant:"body1",color:"textSecondary"},ce(e.createdat))),secondary:e.message}))},ue=function(){var e=Object(o.c)((function(e){return e.messages})),t=Object(o.c)((function(e){return e.selectedChannel})),n=Object(o.c)((function(e){return e.users})),a=Object(r.useRef)(void 0);return Object(r.useEffect)((function(){a.current&&(a.current.scrollTop=a.current.scrollHeight,a.current.scrollLeft=0)}),[e]),l.a.createElement(ne.a,{innerRef:a},e?e.map((function(e){return e.channel===t?l.a.createElement(oe,{key:e.messageid,guild:e.guild,userid:e.userid,username:n[e.userid]?n[e.userid].username:"",createdat:e.createdat,avatar:n[e.userid]?n[e.userid].avatar:void 0,message:e.message}):void 0})):void 0)},se=n(238);function de(e){return{type:a.SET_CONNECTED,payload:e}}function me(e){return{type:a.SET_MESSAGES,payload:e}}function Ee(e){return{type:a.SET_SELECTED_CHANNEL,payload:e}}function ge(e){return{type:a.SET_CHANNELS,payload:e}}function pe(){return{type:a.TOGGLE_GUILD_SETTINGS_DIALOG}}function fe(e){return{type:a.SET_INVITES,payload:e}}var ve=function(){var e=Object(r.useRef)(void 0),t=Object(o.c)((function(e){return e.connected})),n=Object(o.c)((function(e){return e.inputStyle})),i=Object(o.c)((function(e){return e.selectedGuild})),c=Object(o.c)((function(e){return e.selectedChannel})),u=Object(o.b)();return Object(r.useEffect)((function(){var t;e.current&&u((t=e.current,{type:a.SET_CHAT_INPUT,payload:t}))}),[e,u]),l.a.createElement("div",null,l.a.createElement(se.a,{label:t?"Message":"Currently Offline",variant:n,fullWidth:!0,multiline:!0,rowsMax:3,rows:3,onKeyPress:function(t){"Enter"!==t.key||t.shiftKey||(t.preventDefault(),e.current&&!/^\s*$/.test(e.current.value)&&c&&(Ct.sendMessage(i,c,e.current.value),e.current.value=""))},inputRef:e,color:"secondary"}))},be=n(102),he=n.n(be),ye=Object(_.a)((function(e){return{guildlist:{width:"68px"},guildiconroot:{boxSizing:"border-box",borderRadius:"50%",marginTop:e.spacing(1),border:"2px solid transparent"},selectedguildicon:{border:"2px solid ".concat(e.palette.primary.light)},guildicon:{width:"64px",height:"64px",borderRadius:"64px",objectFit:"cover",backgroundColor:"dark"===e.palette.type?e.palette.grey[800]:e.palette.grey[400]},joinGuild:{marginTop:e.spacing(1),width:"64px",height:"64px",borderRadius:"64px",backgroundColor:e.palette.secondary.dark}}})),Oe=n(241),Se=n(47),Ge=function(e){var t=Object(o.c)((function(e){return e.guildList})),n=ye(),r=Object(o.b)();return l.a.createElement(l.a.Fragment,null,l.a.createElement(Se.b,{id:e.guildid},l.a.createElement(B.a,{className:"".concat(n.guildiconroot," ").concat(e.selected?n.selectedguildicon:void 0),key:e.guildid,onClick:function(){r({type:a.SET_SELECTED_GUILD,payload:e.guildid})}},l.a.createElement(Oe.a,{title:e.guildname,placement:"right"},l.a.createElement("img",{className:n.guildicon,alt:"",src:e.picture,draggable:!1})))),l.a.createElement(Se.a,{id:e.guildid},l.a.createElement(ne.a,null,l.a.createElement(Se.c,null,l.a.createElement(ae.a,{button:!0,onClick:function(){Ct.leaveGuild(e.guildid)}},l.a.createElement(ie.a,{primary:"Leave Guild"}))),t&&t[e.guildid].owner?l.a.createElement(l.a.Fragment,null,l.a.createElement(Se.c,null,l.a.createElement(ae.a,{button:!0,onClick:function(){return r(pe())}},l.a.createElement(ie.a,{primary:"Guild Settings"})))):void 0)))},Le=function(){var e=ye(),t=Object(o.c)((function(e){return e.guildList})),n=Object(o.c)((function(e){return e.selectedGuild})),r=Object(o.b)();return l.a.createElement("div",{className:e.guildlist},Object.keys(t).map((function(e){return l.a.createElement(Ge,{guildid:e,key:e,selected:n===e,guildname:t[e].guildname,picture:t[e].picture})})),l.a.createElement(B.a,{className:e.joinGuild,onClick:function(){return r({type:a.TOGGLE_JOIN_GUILD_DIALOG})}},l.a.createElement(Oe.a,{title:"Join Or Create Guild",placement:"right"},l.a.createElement(he.a,null))))},je=n(222),Te=n(223),Ce=n(212),_e=n(105),ke=n.n(_e),Ie=n(104),Ne=n.n(Ie),De=n(103),Ae=n.n(De),we=n(106),Re=n.n(we),Ue=Object(_.a)((function(e){return{selectedChannel:{backgroundColor:"dark"===e.palette.type?e.palette.grey[800]:e.palette.grey[400]},nested:{paddingLeft:e.spacing(4)},newChannelInput:{marginLeft:e.spacing(2),marginRight:e.spacing(2)}}})),xe=function(e){var t=Object(o.c)((function(e){return e.selectedGuild})),n=Object(o.c)((function(e){return e.selectedChannel})),a=Object(o.c)((function(e){return e.guildList})),r=Ue();return l.a.createElement(l.a.Fragment,null,l.a.createElement(Se.b,{id:e.channelid},l.a.createElement(ae.a,{button:!0,key:e.channelid,className:e.channelid===n?r.selectedChannel:void 0,onClick:function(){return e.setSelectedChannel(e.channelid)}},l.a.createElement(ie.a,{secondary:"#".concat(e.channelname)}))),a[t]&&a[t].owner?l.a.createElement(Se.a,{id:e.channelid},l.a.createElement(ne.a,null,l.a.createElement(ae.a,{button:!0,onClick:function(){Ct.sendDeleteChannel(t,e.channelid)}},l.a.createElement(ie.a,{primary:"Delete Channel"})))):void 0)},Me=function(){var e=Object(o.c)((function(e){return e.channels})),t=Object(o.c)((function(e){return e.selectedGuild})),n=Object(o.c)((function(e){return e.guildList})),a=Object(r.useState)(!1),i=Object(N.a)(a,2),c=i[0],u=i[1],s=Object(r.useState)(!1),d=Object(N.a)(s,2),m=d[0],E=d[1],g=Object(r.useRef)(null),p=Object(o.b)(),f=Ue(),v=function(e){p(Ee(e))};return l.a.createElement("div",null,l.a.createElement(ne.a,{style:{padding:0}},t?l.a.createElement(l.a.Fragment,null,l.a.createElement(ae.a,{button:!0,onClick:function(){return u(!c)}},l.a.createElement(ie.a,{primary:"Guild Options"}),c?l.a.createElement(Ae.a,null):l.a.createElement(Ne.a,null)),l.a.createElement(je.a,{in:c,timeout:"auto",unmountOnExit:!0},l.a.createElement(ne.a,{component:"div",disablePadding:!0},n[t]&&n[t].owner?l.a.createElement(l.a.Fragment,null,l.a.createElement(ae.a,{button:!0,className:f.nested,onClick:function(){Ct.sendGetInvites(t),p(pe())}},l.a.createElement(Te.a,null,l.a.createElement(ke.a,null)),l.a.createElement(ie.a,{primary:"Guild Settings"}))):void 0,l.a.createElement(ae.a,{button:!0,className:f.nested,onClick:function(){Ct.leaveGuild(t)}},l.a.createElement(Te.a,null,l.a.createElement(Re.a,null)),l.a.createElement(ie.a,{primary:"Leave Guild"}))))):void 0,e?Object.keys(e).map((function(t){return l.a.createElement(xe,{key:t,channelid:t,channelname:e[t],setSelectedChannel:v})})):void 0,l.a.createElement("div",{className:f.newChannelInput},m?l.a.createElement(Ce.a,{fullWidth:!0,autoFocus:!0,onKeyPress:function(e){"Enter"===e.key&&g.current&&(Ct.sendAddChannel(t,g.current.value),E(!1))},onBlur:function(){return E(!1)},placeholder:"Channel Name",inputRef:g}):void 0),t&&n[t]&&n[t].owner?l.a.createElement(Oe.a,{title:"Create Channel"},l.a.createElement(ae.a,{button:!0,onClick:function(){E(!0)}},l.a.createElement(ie.a,{style:{textAlign:"center"},primary:"+"}))):void 0))},He=function(){var e=te(),t=Object(o.c)((function(e){return e.messages})),n=Object(r.useRef)(null),a=Object(o.c)((function(e){return e.chatInput}));Object(r.useEffect)((function(){n.current&&(n.current.scrollTop=n.current.scrollHeight)}),[t]);return l.a.createElement("div",{className:e.root},l.a.createElement("div",{className:e.guildlist},l.a.createElement(Le,null)),l.a.createElement("div",{className:e.channellist},l.a.createElement(Me,null)),l.a.createElement("div",{className:e.chatArea},l.a.createElement("div",{className:e.messages,ref:n,onKeyDown:function(e){console.log("bruh"),"Tab"!==e.key&&a&&a.focus()},tabIndex:-1},l.a.createElement(ue,null)),l.a.createElement("div",{className:e.input},l.a.createElement(ve,null))))},Pe=n(224),We=function(){var e=Object(o.c)((function(e){return e.joinGuildDialog})),t=Object(o.c)((function(e){return e.inputStyle})),n=Object(r.useState)(""),i=Object(N.a)(n,1)[0],c=Object(r.useState)(""),u=Object(N.a)(c,1)[0],s=Object(r.useRef)(null),d=Object(r.useRef)(null),E=Object(o.b)();return l.a.createElement(D.a,{open:e,onClose:function(){return E({type:a.TOGGLE_JOIN_GUILD_DIALOG})}},l.a.createElement(w.a,null,l.a.createElement(Pe.a,{container:!0,spacing:1},l.a.createElement(Pe.a,{item:!0,xs:6},l.a.createElement("div",null,l.a.createElement(O.a,{variant:"h5"},"Join Guild"),l.a.createElement(se.a,{label:"Join Code",variant:t,fullWidth:!0,inputRef:s}),l.a.createElement(O.a,{color:"error",variant:"body2"},i||l.a.createElement("br",null)),l.a.createElement(m.a,{onClick:function(){s.current&&s.current.value&&Ct.joinGuild(s.current.value)}},"Join Guild"))),l.a.createElement(Pe.a,{item:!0,xs:6},l.a.createElement("div",null,l.a.createElement(O.a,{variant:"h5"},"Create Guild"),l.a.createElement(se.a,{label:"Guild Name",variant:t,fullWidth:!0,inputRef:d}),l.a.createElement(O.a,{color:"error",variant:"body2"},u||l.a.createElement("br",null)),l.a.createElement(m.a,{onClick:function(){d.current&&d.current.value&&Ct.createGuild(d.current.value)}},"Create Guild"))))))},Je=n(107),Be=n.n(Je),Fe=n(225),Ye=n(226),Ve=n(227),Ke=n(228),ze=n(229),$e=n(108),qe=n.n($e),Qe=n(111),Xe=n.n(Qe),Ze=n(69),et=n.n(Ze),tt=n(110),nt=n.n(tt),at=n(109),rt=n.n(at),lt=Object(_.a)((function(e){return{guildIcon:{width:"100px",height:"100px"},menuEntry:{marginTop:e.spacing(2)},clipboardbtn:{marginLeft:e.spacing(3)}}})),it=function(){var e=Object(o.c)((function(e){return e.guildSettingsDialog})),t=Object(o.c)((function(e){return e.selectedGuild})),n=Object(o.c)((function(e){return e.inputStyle})),i=Object(o.c)((function(e){return e.guildList})),c=Object(o.c)((function(e){return e.invites})),u=Object(o.b)(),s=Object(r.useRef)(null),d=Object(r.useState)(i[t]?i[t].guildname:void 0),E=Object(N.a)(d,2),g=E[0],f=E[1],v=Object(r.useState)(null),S=Object(N.a)(v,2),G=S[0],L=S[1],j=Object(r.useState)(i[t]?i[t].picture:void 0),T=Object(N.a)(j,2),C=T[0],_=T[1],k=lt();return l.a.createElement(D.a,{open:e,onClose:function(){return u({type:a.TOGGLE_GUILD_SETTINGS_DIALOG})},fullScreen:!0},l.a.createElement(b.a,{style:{position:"relative"}},l.a.createElement(h.a,null,l.a.createElement(y.a,{edge:"start",color:"inherit",onClick:function(){return u({type:a.TOGGLE_GUILD_SETTINGS_DIALOG})}},l.a.createElement(et.a,null)),l.a.createElement(O.a,{variant:"h6"},"Guild Settings"))),l.a.createElement(w.a,null,l.a.createElement("div",{style:{width:"33%"}},l.a.createElement("input",{type:"file",id:"file",multiple:!0,ref:s,style:{display:"none"},onChange:function(e){if(e.currentTarget.files&&e.currentTarget.files.length>0){var t=e.currentTarget.files[0];if(L(t),t.type.startsWith("image/")&&t.size<33554432){var n=new FileReader;n.readAsDataURL(t),n.addEventListener("load",(function(){"string"===typeof n.result&&_(n.result)}))}}}}),l.a.createElement(B.a,{style:{borderRadius:"50%"},onClick:function(){s.current&&s.current.click()}},l.a.createElement(le.a,{className:k.guildIcon,src:C})),l.a.createElement(se.a,{label:"Guild Name",fullWidth:!0,variant:n,className:k.menuEntry,value:g,onChange:function(e){return f(e.currentTarget.value)}}),l.a.createElement(m.a,{variant:"contained",color:"secondary",className:k.menuEntry,onClick:function(){if(i[t]){if(C!==i[t].picture&&G){var e=new FormData;e.append("file",G),Be.a.post("http://".concat(window.location.hostname,":2288/api/rest/fileupload"),e,{}).then((function(e){if(e.data){var n=e.data;Ct.sendGuildPictureUpdate(t,"http://".concat(window.location.hostname,":2288/filestore/").concat(n))}})).catch((function(){p.b.error("Failed to update guild icon")}))}i[t].guildname!==g&&g&&Ct.sendGuildNameUpdate(t,g)}}},"Save Changes"),l.a.createElement(O.a,{variant:"h4",className:k.menuEntry},"Join Codes"),l.a.createElement(Fe.a,null,l.a.createElement(Ye.a,null,l.a.createElement(Ve.a,null,l.a.createElement(Ke.a,null,"Join Code"),l.a.createElement(Ke.a,null,"Amount Used"),l.a.createElement(Ke.a,null,"Actions"))),l.a.createElement(ze.a,null,Object.keys(c).map((function(e){return l.a.createElement(Ve.a,{key:e},l.a.createElement(Ke.a,{component:"th",scope:"row"},e),l.a.createElement(Ke.a,{component:"th",scope:"row"},c[e]),l.a.createElement(Ke.a,{component:"td",scope:"row"},l.a.createElement(Oe.a,{title:"Copy Invite Link"},l.a.createElement(y.a,{onClick:function(){qe()("http://".concat(window.location.hostname).concat(window.location.port?":"+window.location.port:"","/invite/").concat(e)),p.b.info("Successfully copied to clipboard!")}},l.a.createElement(rt.a,null))),l.a.createElement(Oe.a,{title:"Delete Invite Link"},l.a.createElement(y.a,{onClick:function(){return n=e,void Ct.sendDeleteInvite(n,t);var n}},l.a.createElement(nt.a,null)))))})))),l.a.createElement(m.a,{fullWidth:!0,onClick:function(){Ct.sendCreateInvite(t)}},l.a.createElement(Xe.a,null)))))},ct=Object(_.a)((function(e){return{guildIcon:{width:"100px",height:"100px"},menuEntry:{marginTop:e.spacing(2)},clipboardbtn:{marginLeft:e.spacing(3)}}})),ot=function(){var e=Object(o.c)((function(e){return e.userSettingsDialog})),t=Object(r.useRef)(null),n=Object(o.c)((function(e){return e.inputStyle})),i=Object(r.useState)(""),c=Object(N.a)(i,2),u=c[0],s=c[1],d=Object(o.b)(),E=ct();return l.a.createElement(D.a,{open:e,onClose:function(){return d({type:a.TOGGLE_USER_SETTINGS_DIALOG})},fullScreen:!0},l.a.createElement(b.a,{style:{position:"relative"}},l.a.createElement(h.a,null,l.a.createElement(y.a,{edge:"start",onClick:function(){return d({type:a.TOGGLE_USER_SETTINGS_DIALOG})}},l.a.createElement(et.a,null)),l.a.createElement(O.a,{variant:"h6"},"User Settings"))),l.a.createElement(w.a,null,l.a.createElement("div",{style:{width:"33%"}},l.a.createElement("input",{type:"file",id:"file",multiple:!0,ref:t,style:{display:"none"}}),l.a.createElement(B.a,{style:{borderRadius:"50%"},onClick:function(){t.current&&t.current.click()}},l.a.createElement(le.a,{className:E.guildIcon})),l.a.createElement(se.a,{label:"Username",fullWidth:!0,variant:n,className:E.menuEntry,value:u,onChange:function(e){return s(e.currentTarget.value)}}),l.a.createElement(m.a,{variant:"contained",color:"secondary",className:E.menuEntry},"Save Changes"))))},ut=function(){var e=ee(),t=Object(o.b)(),n=Object(o.c)((function(e){return e.connected})),i=Object(o.c)((function(e){return e.channels})),c=Object(o.c)((function(e){return e.invites})),s=Object(o.c)((function(e){return e.selectedGuild})),d=Object(o.c)((function(e){return e.themeDialog})),m=Object(o.c)((function(e){return e.joinGuildDialog})),E=Object(o.c)((function(e){return e.guildSettingsDialog})),g=Object(o.c)((function(e){return e.userSettingsDialog})),b=Object(u.f)();return Object(r.useEffect)((function(){n&&Ct.getGuilds()}),[n]),Object(r.useEffect)((function(){n&&(t(me([])),t(Ee(void 0)),Ct.getMessages(s),Ct.getChannels(s))}),[s]),Object(r.useEffect)((function(){return Ct.conn.readyState!==WebSocket.OPEN&&Ct.conn.readyState!==WebSocket.CONNECTING||"string"!==typeof localStorage.getItem("token")?void b.push("/"):(Ct.events.addListener("getguilds",(function(e){var n,r=e.guilds;0===Object.keys(r).length&&(t(me([])),t(Ee(void 0)),t((n=void 0,{type:a.SET_SELECTED_GUILD,payload:n})),t(ge({}))),t(function(e){return{type:a.SET_GUILDS,payload:e}}(r))})),Ct.events.addListener("getmessages",(function(e){e.messages&&t(me(e.messages.reverse()))})),Ct.events.addListener("message",(function(e){var n;"string"===typeof e.userid&&"number"===typeof e.createdat&&"string"===typeof e.guild&&"string"===typeof e.message&&t((n=e,{type:a.ADD_MESSAGE,payload:n}))})),Ct.events.addListener("getchannels",(function(e){"object"===typeof e&&t(ge(e.channels))})),Ct.events.addListener("deauth",(function(){p.b.warn("Your session has expired. Please login again"),b.push("/")})),Ct.events.addListener("leaveguild",(function(e){"string"!==typeof e.message?Ct.getGuilds():p.b.error(e.message)})),Ct.events.addListener("joinguild",(function(e){e.message||(Ct.getGuilds(),t({type:a.TOGGLE_JOIN_GUILD_DIALOG}))})),Ct.events.addListener("createguild",(function(e){e.message||(Ct.getGuilds(),t({type:a.TOGGLE_JOIN_GUILD_DIALOG}))})),Ct.events.addListener("updateguildpicture",(function(e){var n,r;!0===e.success&&e.picture&&e.guild?(t((n=e.guild,r=e.picture,{type:a.SET_GUILD_PICTURE,payload:{guild:n,picture:r}})),E&&t(pe())):p.b.error("Error saving guild")})),Ct.events.addListener("updateguildname",(function(e){var n,r;!0===e.success&&e.name&&e.guild?(t((n=e.guild,r=e.name,{type:a.SET_GUILD_NAME,payload:{guild:n,name:r}})),E&&t(pe())):p.b.error("Error saving guild")})),Ct.events.addListener("getinvites",(function(e){e.invites&&e.guild&&t(fe(e.invites))})),Ct.events.addListener("addguildchannel",(function(e){!0===e.success&&e.guild&&e.channelname&&e.channelid&&t(ge(Object(v.a)({},i,Object(f.a)({},e.channelid,e.channelname))))})),Ct.events.addListener("deleteguildchannel",(function(e){if(!0===e.success&&e.guild&&e.channelid){var n=Object(v.a)({},i);delete n[e.channelid],t(ge(Object(v.a)({},n)))}})),Ct.events.addListener("deleteinvite",(function(e){if(!0===e.success&&e.invite){var n=Object(v.a)({},c);delete n[e.invite],t(fe(n))}})),Ct.events.addListener("createinvite",(function(e){if(!0===e.success&&e.invite){var n=Object(v.a)({},c,Object(f.a)({},e.invite,0));t(fe(n))}})),Ct.events.addListener("getuser",(function(e){var n,r,l;console.log(e),"string"===typeof e.userid&&"string"===typeof e.username&&"string"===typeof e.avatar&&t((n=e.userid,r=e.username,l=e.avatar,{type:a.SET_USER,payload:{userid:n,username:r,avatar:l}}))})),function(){Ct.events.removeAllListeners("getguilds"),Ct.events.removeAllListeners("getmessages"),Ct.events.removeAllListeners("message"),Ct.events.removeAllListeners("getchannels"),Ct.events.removeAllListeners("deauth"),Ct.events.removeAllListeners("leaveguild"),Ct.events.removeAllListeners("joinguild"),Ct.events.removeAllListeners("createguild"),Ct.events.removeAllListeners("updateguildpicture"),Ct.events.removeAllListeners("updateguildname"),Ct.events.removeAllListeners("getinvites"),Ct.events.removeAllListeners("addguildchannel"),Ct.events.removeAllListeners("deleteguildchannel"),Ct.events.removeAllListeners("deleteinvite"),Ct.events.removeAllListeners("createinvite"),Ct.events.removeAllListeners("getusername")})}),[b,t,E,!1,i,c]),l.a.createElement("div",{className:e.root},d?l.a.createElement(Z,null):void 0,m?l.a.createElement(We,null):void 0,E?l.a.createElement(it,null):void 0,g?l.a.createElement(ot,null):void 0,l.a.createElement(I,null),l.a.createElement("div",{className:e.navFill})," ",l.a.createElement(He,null))},st=n(167),dt=n(234),mt=n(230),Et=Object(_.a)((function(e){return{form:{width:"60%",height:"60%",position:"relative"},root:{width:"100vw",height:"100vh",display:"flex",alignItems:"center",justifyContent:"center"}}})),gt=Object(_.a)((function(e){return{root:{paddingLeft:e.spacing(1),paddingRight:e.spacing(1),paddingTop:e.spacing(1),paddingBottom:e.spacing(1)},submitBtn:{position:"absolute",bottom:e.spacing(1),left:e.spacing(1)}}})),pt=function(){var e=Object(u.f)(),t=gt(),n=l.a.useState(void 0),a=Object(N.a)(n,2),i=a[0],c=a[1],o=Object(r.useRef)(void 0),s=Object(r.useRef)(void 0);return Object(r.useEffect)((function(){return Ct.events.addListener("loginerror",(function(e){"string"===typeof e.message&&c(e.message)})),Ct.events.addListener("token",(function(t){"string"===typeof t.token&&"string"===typeof t.userid&&(localStorage.setItem("token",t.token),localStorage.setItem("userid",t.userid),e.push("/app"))})),function(){Ct.events.removeAllListeners("loginerror"),Ct.events.removeAllListeners("token")}}),[e]),l.a.createElement("div",{className:t.root},l.a.createElement("form",{onSubmit:function(e){return e.preventDefault()}},l.a.createElement(se.a,{label:"Email",type:"email",name:"email",autoComplete:"email",margin:"normal",fullWidth:!0,inputRef:o}),l.a.createElement(se.a,{label:"Password",type:"password",name:"password",margin:"normal",fullWidth:!0,inputRef:s}),i?l.a.createElement(O.a,{variant:"subtitle1",color:"error"},i):void 0,l.a.createElement(m.a,{variant:"contained",color:"primary",className:t.submitBtn,onClick:function(){Ct.conn.readyState===WebSocket.CLOSED?p.b.error("Can't login, trouble connecting to server"):o.current&&s.current&&o.current.value.length&&s.current.value?Ct.login(o.current.value,s.current.value):p.b.error("Can't login, missing email or password")},type:"submit"},"Log In")))},ft=Object(_.a)((function(e){return{root:{paddingLeft:e.spacing(1),paddingRight:e.spacing(1),paddingTop:e.spacing(1),paddingBottom:e.spacing(1)},submitBtn:{position:"absolute",bottom:e.spacing(1),left:e.spacing(1)}}})),vt=function(){var e=ft(),t=Object(u.f)(),n=l.a.useState(void 0),a=Object(N.a)(n,2),i=a[0],c=a[1],o=Object(r.useRef)(void 0),s=Object(r.useRef)(void 0),d=Object(r.useRef)(void 0);return Object(r.useEffect)((function(){return Ct.events.addListener("registererror",(function(e){"string"===typeof e.message&&c(e.message)})),Ct.events.addListener("token",(function(e){"string"===typeof e.token&&"string"===typeof e.userid&&(localStorage.setItem("token",e.token),localStorage.setItem("userid",e.userid),t.push("/app"))})),function(){Ct.events.removeAllListeners("registererror"),Ct.events.removeAllListeners("token")}}),[t]),l.a.createElement("div",{className:e.root},l.a.createElement("form",{onSubmit:function(e){return e.preventDefault()}},l.a.createElement(se.a,{label:"Email",type:"email",name:"email",autoComplete:"email",margin:"normal",fullWidth:!0,inputRef:o}),l.a.createElement(se.a,{label:"Username",type:"text",name:"usernamee",autoComplete:"username",margin:"normal",fullWidth:!0,inputRef:s}),l.a.createElement(se.a,{label:"Password",type:"password",name:"password",autoComplete:"new-password",margin:"normal",fullWidth:!0,inputRef:d}),l.a.createElement(se.a,{label:"Confirm Password",type:"password",name:"confirmpassword",autoComplete:"none",margin:"normal",fullWidth:!0}),i?l.a.createElement(O.a,{variant:"subtitle1",color:"error"},i):void 0,l.a.createElement(m.a,{variant:"contained",color:"primary",className:e.submitBtn,onClick:function(){Ct.conn.readyState===WebSocket.CLOSED?p.b.error("Can't register, trouble connecting to server"):o.current&&s.current&&d.current&&o.current.value&&d.current.value&&s.current.value?Ct.register(o.current.value,s.current.value,d.current.value):p.b.error("Can't register, missing email, username, or password")},type:"submit"},"Log In")))},bt=function(){var e=Et(),t=l.a.useState(0),n=Object(N.a)(t,2),a=n[0],r=n[1];return l.a.createElement("div",{className:e.root},l.a.createElement(st.a,{className:e.form},l.a.createElement(dt.a,{value:a,onChange:function(e,t){return r(t)},variant:"fullWidth",indicatorColor:"primary"},l.a.createElement(mt.a,{label:"Login",id:"form-tab-0"}),l.a.createElement(mt.a,{label:"Register",id:"form-tab-1"})),0===a?l.a.createElement(pt,null):l.a.createElement(vt,null)))},ht=n(113),yt=n(114),Ot=n(115),St=function(){function e(){var t=this;Object(ht.a)(this,e),this.conn=void 0,this.events=void 0,this.connect=function(){t.conn=new WebSocket("ws://".concat(window.location.hostname,":2288/api/socket")),t.conn.addEventListener("open",(function(){return t.events.emit("open")})),t.conn.addEventListener("close",(function(){return t.events.emit("close")})),t.conn.addEventListener("error",(function(){return t.events.emit("error")})),t.conn.onmessage=function(e){var n=JSON.parse(e.data);if("string"===typeof n.type&&"object"===typeof n.data){var a=n;t.events.emit(a.type,a.data)}else console.warn("Unsupported packet received"),console.log(n)}},this.conn=new WebSocket("ws://".concat(window.location.hostname,":2288/api/socket")),this.events=new Ot.EventEmitter,this.conn.addEventListener("open",(function(){return t.events.emit("open")})),this.conn.addEventListener("close",(function(){return t.events.emit("close")})),this.conn.addEventListener("error",(function(){return t.events.emit("error")})),this.conn.onmessage=function(e){var n=JSON.parse(e.data);if("string"===typeof n.type&&"object"===typeof n.data){var a=n;t.events.emit(a.type,a.data)}else console.warn("Unsupported packet received"),console.log(n)}}return Object(yt.a)(e,[{key:"emitEvent",value:function(e,t){this.conn.readyState===WebSocket.OPEN&&this.conn.send(JSON.stringify({type:e,data:t}))}},{key:"login",value:function(e,t){this.emitEvent("login",{email:e,password:t})}},{key:"register",value:function(e,t,n){this.emitEvent("register",{email:e,username:t,password:n})}},{key:"getGuilds",value:function(){this.emitEvent("getguilds",{token:localStorage.getItem("token")})}},{key:"getMessages",value:function(e){this.emitEvent("getmessages",{token:localStorage.getItem("token"),guild:e})}},{key:"sendMessage",value:function(e,t,n){this.emitEvent("message",{token:localStorage.getItem("token"),guild:e,channel:t,message:n})}},{key:"getChannels",value:function(e){this.emitEvent("getchannels",{token:localStorage.getItem("token"),guild:e})}},{key:"joinGuild",value:function(e){this.emitEvent("joinguild",{token:localStorage.getItem("token"),invite:e})}},{key:"createGuild",value:function(e){this.emitEvent("createguild",{token:localStorage.getItem("token"),guildname:e})}},{key:"leaveGuild",value:function(e){this.emitEvent("leaveguild",{token:localStorage.getItem("token"),guild:e})}},{key:"sendGuildNameUpdate",value:function(e,t){this.emitEvent("updateguildname",{token:localStorage.getItem("token"),guild:e,name:t})}},{key:"sendGuildPictureUpdate",value:function(e,t){this.emitEvent("updateguildpicture",{token:localStorage.getItem("token"),guild:e,picture:t})}},{key:"sendGetInvites",value:function(e){this.emitEvent("getinvites",{token:localStorage.getItem("token"),guild:e})}},{key:"sendAddChannel",value:function(e,t){this.emitEvent("addchannel",{token:localStorage.getItem("token"),guild:e,channel:t})}},{key:"sendDeleteChannel",value:function(e,t){this.emitEvent("deletechannel",{token:localStorage.getItem("token"),guild:e,channel:t})}},{key:"sendDeleteInvite",value:function(e,t){this.emitEvent("deleteinvite",{token:localStorage.getItem("token"),invite:e,guild:t})}},{key:"sendCreateInvite",value:function(e){this.emitEvent("createinvite",{token:localStorage.getItem("token"),guild:e})}},{key:"sendGetUser",value:function(e){this.emitEvent("getuser",{token:localStorage.getItem("token"),userid:e})}}]),e}(),Gt=n(116),Lt=Object(Gt.a)((function(e){return{"@global":{"::-webkit-scrollbar":{width:"10px"},"::-webkit-scrollbar-thumb:hover":{backgroundColor:"light"===e.palette.type?"rgb(150, 150, 150)":"rgb(100, 100, 100)"},"::-webkit-scrollbar-track":{backgroundColor:"light"===e.palette.type?"rgb(245, 245, 245)":"rgb(46, 46, 46)"},"::-webkit-scrollbar-thumb":{backgroundColor:"light"===e.palette.type?"rgb(200, 200, 200)":"rgb(64, 64, 64)"},"::-webkit-scrollbar-corner":{backgroundColor:"light"===e.palette.type?"rgb(200, 200, 200)":"rgb(64, 64, 64)"},"*":{scrollbarColor:"".concat("light"===e.palette.type?"rgb(200, 200, 200)":"rgb(64, 64, 64)"," ").concat("light"===e.palette.type?"rgb(245, 245, 245)":"rgb(46, 46, 46)")}}}})),jt=(n(165),Object(_.a)((function(e){return{errorRoot:{textAlign:"center"},errorMsg:{paddingTop:e.spacing(10)},errorBtn:{marginTop:e.spacing(2)}}}))),Tt=function(){var e=Object(u.g)().invitecode,t=Object(u.f)(),n=Object(r.useState)(null),a=Object(N.a)(n,2),i=a[0],c=a[1],o=jt();return Object(r.useEffect)((function(){Ct.events.addListener("joinguild",(function(e){console.log(e),e.message?c(e.message):(c(null),t.push("/app"))})),Ct.events.addListener("open",(function(){e&&Ct.joinGuild(e)}))}),[t,e]),l.a.createElement("div",null,i?l.a.createElement("div",{className:o.errorRoot},l.a.createElement(O.a,{variant:"h1",align:"center",className:o.errorMsg},"404",l.a.createElement("br",null),i),l.a.createElement(m.a,{variant:"contained",color:"secondary",className:o.errorBtn,onClick:function(){return t.push("/")}},"Return To Login")):void 0)},Ct=new St,_t=!1,kt=function(){var e=Object(o.b)();return Lt(),Object(r.useEffect)((function(){return Ct.events.addListener("close",(function(){_t||(p.b.error("You have lost connection to the server"),e(de(!1)),_t=!0),setTimeout(Ct.connect,3e3)})),Ct.events.addListener("open",(function(){_t&&p.b.success("You have reconnected to the server"),e(de(!0))})),function(){Ct.events.removeAllListeners("close"),Ct.events.removeAllListeners("open")}}),[e]),l.a.createElement(l.a.Fragment,null,l.a.createElement(d.a,null),l.a.createElement(p.a,null),l.a.createElement(s.a,null,l.a.createElement(u.c,null,l.a.createElement(u.a,{exact:!0,path:"/"},l.a.createElement(bt,null)),l.a.createElement(u.a,{exact:!0,path:"/app"},l.a.createElement(ut,null)),l.a.createElement(u.a,{exact:!0,path:"/invite/:invitecode"},l.a.createElement(Tt,null)),l.a.createElement(u.a,{exact:!0,path:"/bruh"},l.a.createElement(m.a,{onClick:function(){p.b.info("GET BRUHED ON KID")}},"Bruh Button")))))},It=function(){var e=Object(o.c)((function(e){return e.theme})),t=Object(E.a)({palette:{primary:e.primary,secondary:e.secondary,type:e.type}});return l.a.createElement("div",{className:"root"},l.a.createElement(g.a,{theme:t},l.a.createElement(kt,null)))},Nt=n(61),Dt=n(119),At={theme:{type:"dark",primary:F.a,secondary:Y.a},guildList:{},themeDialog:!1,connected:!1,selectedGuild:"",messages:[],invites:{},inputStyle:"filled",channels:{},selectedChannel:void 0,joinGuildDialog:!1,guildSettingsDialog:!1,users:{},userSettingsDialog:!1,chatInput:void 0};var wt=Object(Nt.b)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:At,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case a.INVERT_THEME:return Object(v.a)({},e,{theme:Object(v.a)({},e.theme,{type:"dark"===e.theme.type?"light":"dark"})});case a.TOGGLE_THEME_DIALOG:return Object(v.a)({},e,{themeDialog:!e.themeDialog});case a.CHANGE_PRIMARY:return Object(v.a)({},e,{theme:Object(v.a)({},e.theme,{primary:t.payload})});case a.CHANGE_SECONDARY:return Object(v.a)({},e,{theme:Object(v.a)({},e.theme,{secondary:t.payload})});case a.SET_CONNECTED:return Object(v.a)({},e,{connected:t.payload});case a.SET_GUILDS:return Object(v.a)({},e,{guildList:t.payload});case a.SET_SELECTED_GUILD:return Object(v.a)({},e,{selectedGuild:t.payload});case a.ADD_MESSAGE:return Object(v.a)({},e,{messages:[].concat(Object(Dt.a)(e.messages),[t.payload])});case a.SET_MESSAGES:return Object(v.a)({},e,{messages:t.payload});case a.SET_INPUT_STYLE:return Object(v.a)({},e,{inputStyle:t.payload});case a.SET_CHANNELS:return Object(v.a)({},e,{channels:t.payload});case a.SET_SELECTED_CHANNEL:return Object(v.a)({},e,{selectedChannel:t.payload});case a.TOGGLE_JOIN_GUILD_DIALOG:return Object(v.a)({},e,{joinGuildDialog:!e.joinGuildDialog});case a.TOGGLE_GUILD_SETTINGS_DIALOG:return Object(v.a)({},e,{guildSettingsDialog:!e.guildSettingsDialog});case a.SET_GUILD_PICTURE:return Object(v.a)({},e,{guildList:Object(v.a)({},e.guildList,Object(f.a)({},t.payload.guild,Object(v.a)({},e.guildList[t.payload.guild],{picture:t.payload.picture})))});case a.SET_GUILD_NAME:return Object(v.a)({},e,{guildList:Object(v.a)({},e.guildList,Object(f.a)({},t.payload.guild,Object(v.a)({},e.guildList[t.payload.guild],{guildname:t.payload.name})))});case a.SET_INVITES:return Object(v.a)({},e,{invites:t.payload});case a.SET_USER:return Object(v.a)({},e,{users:Object(v.a)({},e.users,Object(f.a)({},t.payload.userid,t.payload))});case a.TOGGLE_USER_SETTINGS_DIALOG:return Object(v.a)({},e,{userSettingsDialog:!e.userSettingsDialog});case a.SET_CHAT_INPUT:return Object(v.a)({},e,{chatInput:t.payload});default:return e}}));c.a.render(l.a.createElement((function(){return l.a.createElement(o.a,{store:wt},l.a.createElement(It,null))}),null),document.getElementById("root"))}},[[129,1,2]]]);
//# sourceMappingURL=main.d89c5ff9.chunk.js.map