rule updatesubmodules
    command = git submodule update --recursive --remote

rule genprotos
    command = ./genprotos.sh

rule sqlc
    command = sqlc generate

rule gobuild
    command = GO111MODULE=on go build

rule buildent
    command = ent generate ./server/db/ent/entgen/schema/

build legato-sqlc: sqlc
build protobuf: genprotos
build ent: buildent
build submodules: updatesubmodules
build legato-binary: gobuild legato-sqlc legato-protobuf
default legato-binary
